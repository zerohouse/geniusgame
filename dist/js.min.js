Array.prototype.contains=function(item){return-1!=this.indexOf(item)},Array.prototype.remove=function(val,con){(!con||confirm("삭제하시겠습니까?"))&&this.splice(this.indexOf(val),1)},Array.prototype.toggle=function(item){return this.contains(item)?void this.remove(item):void this.push(item)},String.prototype.toDateString=function(){return new Date(this.toString()).toString()},Date.prototype.toDateString=function(){return this.toString()},Date.prototype.toAmPm=function(){var hours=this.getHours(),minutes=this.getMinutes(),ampm=hours>=12?"pm":"am";return hours%=12,hours=hours?hours:12,minutes=10>minutes?"0"+minutes:minutes,hours+":"+minutes+ampm},Date.prototype.toString=function(){var month=""+(this.getMonth()+1),day=""+this.getDate(),year=this.getFullYear();month.length<2&&(month="0"+month),day.length<2&&(day="0"+day);var date=[year,month,day].join(".");return date+" "+this.toAmPm()},String.prototype.newLine=function(){return this.replace(/\n/g,"<br>")},function(i,s,o,g,r,a,m){i.GoogleAnalyticsObject=r,i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date,a=s.createElement(o),m=s.getElementsByTagName(o)[0],a.async=1,a.src=g,m.parentNode.insertBefore(a,m)}(window,document,"script","//www.google-analytics.com/analytics.js","ga"),ga("create","UA-67266885-1","auto");var app=angular.module("resume",["ui.router","ui.bootstrap","ngSanitize","ngAnimate"]);app.scope={},app.run(function($rootScope,$location,$window){$rootScope.$on("$stateChangeSuccess",function(event){$window.ga&&$window.ga("send","pageview",{page:$location.path()})})}),app.config(["$locationProvider",function($locationProvider){$locationProvider.html5Mode({enabled:!0,requireBase:!1})}]),app.config(function($stateProvider,$urlRouterProvider){function leaveRoom(socket){socket.emit("leave")}$urlRouterProvider.otherwise("/"),$stateProvider.state("main",{url:"/",controller:"main",templateUrl:"/dist/pages/main/main.html",onEnter:function(socket){socket.emit("getGameList")}}).state("check",{url:"/check/:id",controller:"check",templateUrl:"/dist/pages/check/check.html",onEnter:function(socket,$stateParams){leaveRoom(socket),socket.emit("join",{type:"check",id:$stateParams.id})}}).state("seven",{url:"/seven/:id",controller:"seven",templateUrl:"/dist/pages/seven/seven.html",onEnter:function(socket,$stateParams){leaveRoom(socket),socket.emit("join",{type:"seven",id:$stateParams.id})}}).state("numberchess",{url:"/numberchess/:id",controller:"numberchess",templateUrl:"/dist/pages/numberchess/numberchess.html",onEnter:function(socket,$stateParams){leaveRoom(socket)}}).state("sabotage",{url:"/sabotage/:id",controller:"sabotage",templateUrl:"/dist/pages/sabotage/sabotage.html",onEnter:function(socket,$stateParams){leaveRoom(socket)}}).state("profile",{url:"/profile",controller:"profile",templateUrl:"/dist/pages/profile/profile.html",onEnter:leaveRoom}).state("board",{url:"/board",controller:"board",templateUrl:"/dist/pages/board/board.html",onEnter:leaveRoom})}),app.directive("card",function(){return{restrict:"E",templateUrl:"/dist/directives/card/card.html",scope:{front:"=",back:"="},controller:function($scope){var icon=$scope.icon={};icon.e="fa fa-eye",icon.x="fa fa-ban";var description=$scope.description={};description[0]="X카드가 없고, 승자가 없을 경우 포인트를 나눠가집니다.",description[1]="이 카드로 승리하면 추가로 칩을 하나씩 더 받습니다.",description[2]="이 카드로 승리하면 추가로 칩을 하나씩 더 받습니다.",description[3]="이 카드로 승리하면 추가로 칩을 하나씩 더 받습니다.",description.e="다른 사람의 카드를 확인한 후 카드를 냅니다.",description.x="아무도 승리하지 못합니다."}}}),app.directive("chat",function(){return{restrict:"E",templateUrl:"/dist/directives/chat/chat.html",scope:{player:"=",setTo:"="},controller:function($scope,socket,$timeout){var chat=document.querySelector(".chat-window"),messages=$scope.messages=[];$scope.setTo=function(p){p.sid!=$scope.player.sid&&($scope.message||($scope.message={}),$scope.message.to=p)},socket.on("chat",function(message){$scope.messages.push(message),$scope.$apply(),$timeout(function(){chat.scrollTop=chat.scrollHeight})}),$scope.send=function(message){void 0!=message.message&&""!=message.message&&($scope.message={},$scope.message.to=message.to,message.date=new Date,socket.emit("chat",message),message.to&&(message.from=message.to,message.fromme=!0,messages.push(message),$timeout(function(){chat.scrollTop=chat.scrollHeight})))}}}}),app.directive("ngEnter",function(){return function(scope,element,attrs){element.bind("keydown keypress",function(event){13===event.which&&(scope.$apply(function(){scope.$eval(attrs.ngEnter)}),event.preventDefault())})}}),app.directive("ngRegex",function($compile){return{restrict:"A",scope:{ngModel:"="},link:function(scope,element,attrs){var message=angular.element("<span class='message' ng-show='!matched && ngModel!=undefined && ngModel.length != 0'>"+attrs.message+"</span>");$compile(message)(scope),element[0].parentNode.insertBefore(message[0],element[0].nextSibling);var parent=scope.$parent,regex=parent[attrs.ngRegex];void 0==regex&&(regex=new RegExp(attrs.ngRegex));var regexTest=function(){return regex.test(parent.$eval(attrs.ngModel))};parent.$watch(attrs.ngModel,function(){function setRegex(val,not){scope.matched=val,val||not?element.removeClass("waring"):element.addClass("waring"),void 0==parent.ngRegex&&(parent.ngRegex={}),parent.ngRegex[attrs.ngModel]=val}return void 0==parent.$eval(attrs.ngModel)||""==parent.$eval(attrs.ngModel)?void setRegex(!1,!0):regexTest()?void setRegex(!0):void setRegex(!1)})}}}),function(){!function(global,factory){if("function"==typeof define&&define.amd)define(["exports","module"],factory);else if("undefined"!=typeof exports&&"undefined"!=typeof module)factory(exports,module);else{var mod={exports:{}};factory(mod.exports,mod),global.autosize=mod.exports}}(this,function(exports,module){"use strict";function assign(ta){function init(){var style=window.getComputedStyle(ta,null);"vertical"===style.resize?ta.style.resize="none":"both"===style.resize&&(ta.style.resize="horizontal"),heightOffset="content-box"===style.boxSizing?-(parseFloat(style.paddingTop)+parseFloat(style.paddingBottom)):parseFloat(style.borderTopWidth)+parseFloat(style.borderBottomWidth),isNaN(heightOffset)&&(heightOffset=0),update()}function changeOverflow(value){var width=ta.style.width;ta.style.width="0px",ta.offsetWidth,ta.style.width=width,overflowY=value,setOverflowY&&(ta.style.overflowY=value),resize()}function resize(){var htmlTop=window.pageYOffset,bodyTop=document.body.scrollTop,originalHeight=ta.style.height;ta.style.height="auto";var endHeight=ta.scrollHeight+heightOffset;return 0===ta.scrollHeight?void(ta.style.height=originalHeight):(ta.style.height=endHeight+"px",document.documentElement.scrollTop=htmlTop,void(document.body.scrollTop=bodyTop))}function update(){var startHeight=ta.style.height;resize();var style=window.getComputedStyle(ta,null);if(style.height!==ta.style.height?"visible"!==overflowY&&changeOverflow("visible"):"hidden"!==overflowY&&changeOverflow("hidden"),startHeight!==ta.style.height){var evt=document.createEvent("Event");evt.initEvent("autosize:resized",!0,!1),ta.dispatchEvent(evt)}}var _ref=void 0===arguments[1]?{}:arguments[1],_ref$setOverflowX=_ref.setOverflowX,setOverflowX=void 0===_ref$setOverflowX?!0:_ref$setOverflowX,_ref$setOverflowY=_ref.setOverflowY,setOverflowY=void 0===_ref$setOverflowY?!0:_ref$setOverflowY;if(ta&&ta.nodeName&&"TEXTAREA"===ta.nodeName&&!ta.hasAttribute("data-autosize-on")){var heightOffset=null,overflowY="hidden",destroy=function(style){window.removeEventListener("resize",update),ta.removeEventListener("input",update),ta.removeEventListener("keyup",update),ta.removeAttribute("data-autosize-on"),ta.removeEventListener("autosize:destroy",destroy),Object.keys(style).forEach(function(key){ta.style[key]=style[key]})}.bind(ta,{height:ta.style.height,resize:ta.style.resize,overflowY:ta.style.overflowY,overflowX:ta.style.overflowX,wordWrap:ta.style.wordWrap});ta.addEventListener("autosize:destroy",destroy),"onpropertychange"in ta&&"oninput"in ta&&ta.addEventListener("keyup",update),window.addEventListener("resize",update),ta.addEventListener("input",update),ta.addEventListener("autosize:update",update),ta.setAttribute("data-autosize-on",!0),setOverflowY&&(ta.style.overflowY="hidden"),setOverflowX&&(ta.style.overflowX="hidden",ta.style.wordWrap="break-word"),init()}}function destroy(ta){if(ta&&ta.nodeName&&"TEXTAREA"===ta.nodeName){var evt=document.createEvent("Event");evt.initEvent("autosize:destroy",!0,!1),ta.dispatchEvent(evt)}}function update(ta){if(ta&&ta.nodeName&&"TEXTAREA"===ta.nodeName){var evt=document.createEvent("Event");evt.initEvent("autosize:update",!0,!1),ta.dispatchEvent(evt)}}var autosize=null;"undefined"==typeof window||"function"!=typeof window.getComputedStyle?(autosize=function(el){return el},autosize.destroy=function(el){return el},autosize.update=function(el){return el}):(autosize=function(el,options){return el&&Array.prototype.forEach.call(el.length?el:[el],function(x){return assign(x,options)}),el},autosize.destroy=function(el){return el&&Array.prototype.forEach.call(el.length?el:[el],destroy),el},autosize.update=function(el){return el&&Array.prototype.forEach.call(el.length?el:[el],update),el}),module.exports=autosize}),app.directive("textarea",function(){return{restrict:"E",link:function(scope,element,attributes){autosize(element)}}})}(),app.controller("nav",function(user,$scope,req,alert){$scope.user=user,$scope.logout=function(){req.get("/api/logout").success(function(){location.reload()})},$scope.mailRequest=function(){var email=prompt("메일주소는요?");return/^([\w-]+(?:\.[\w-]+)*)@((?:[\w-]+\.)*\w[\w-]{0,66})\.([a-z]{2,6}(?:\.[a-z]{2})?)$/i.test(email)?void req.get("/api/password",{email:email}).success(function(res){return res.error?void alert(res.error,!1,2500):void alert("메일이 발송되었습니다.",!0,2500)}):void alert("메일주소를 잘못입력하셨습니다.")}}),app.controller("board",function(user,$scope,req){function Article(){this.type="alert-success",this.align="left",this.date=new Date,this.user=user,this.text=""}$scope.articles=[],$scope.article=new Article,$scope.info={limit:10,page:0},$scope.get=function(){req.get("/api/article",$scope.info).success(function(res){$scope.articles=$scope.articles.concat(res),$scope.info.page++})},$scope.get(),$scope["new"]=0,$scope.submit=function(){""!=$scope.article.text&&req.post("/api/article",$scope.article).success(function(res){return res.err?void alert(res.err):(angular.copy(res,$scope.article),$scope.articles.unshift($scope.article),$scope.article=new Article,void $scope["new"]++)})},$scope["delete"]=function(article){confirm("삭제하시겠습니까?")&&req.post("/api/article/delete",{_id:article._id,user:user.email}).success(function(res){return res.err?void alert(res.err):void $scope.articles.remove(article)})},$scope.user=user}),app.controller("check",function($scope,alert,socket,$stateParams,user,$state,$timeout){function sortPlayers(){$scope.players.forEach(function(p){p.sid==user.sid&&($scope.player=p)})}$scope.user=user,$scope.$watch("hide",function(hide){$scope.player&&$scope.players[0].id==$scope.player.id&&socket.emit("checkgame.hide",hide)}),$scope.$watch("player.booster",function(booster){return booster?void document.querySelector("body").classList.add("steam"):void document.querySelector("body").classList.remove("steam")}),$scope.steamstart=function(val){function startTimer(tick){start||(start=val+tick),$scope.time=parseInt((start-tick)/100)/10,$scope.$apply(),$scope.time>0&&$scope.player.booster&&window.requestAnimationFrame(startTimer)}var start;window.requestAnimationFrame(startTimer)},$scope.steampack=function(i){var require=[15,30,150];if($scope.player&&!($scope.player.booster||$scope.player.score<require[i])){var alerts=["15포인트를 소모하여 30초간 증가/감소하는 점수가 2배가 됩니다.","30포인트를 소모하여 30초간 증가/감소하는 점수가 4배가 됩니다.","150포인트를 소모하여 60초간 증가/감소하는 점수가 10배가 됩니다."];confirm(alerts[i])&&socket.emit("checkgame.steampack",i)}},$scope.id=user.email,$scope.roomId=$stateParams.id,$scope.$watch("orderedPlayers[0]",function(p){void 0!=p&&0!=p.score&&(void 0==this.order||p.id!=this.order.id)&&(this.order=p,alert(p.name+"님이 "+p.score+"점으로 방 1위 입니다."))}),$scope.resetShapes=function(){$scope.shapes=[];for(var shapes=["fa-umbrella","fa-heart","fa-phone","fa-plus","fa-bell","fa-star","fa-circle"],i=0;3>i;i++)$scope.shapes[i]="fa "+shapes.splice(parseInt(Math.random()*shapes.length),1)},$scope.colors=["#4337FD","#FD3737","#FDD237"],$scope.backs=["#000","#888","#FFF"],$scope.selects=[],$scope.messages=[],$scope.format={},$scope.format.selects=function(selects){var result=[];return selects.forEach(function(block){result.push($scope.blocks.indexOf(block)+1)}),result.sort(),result.join(", ")},$scope.format.discovered=function(string){if(void 0!=string){var result=[];return result.push(parseInt(string[0])+1),result.push(parseInt(string[1])+1),result.push(parseInt(string[2])+1),result.join(", ")}},$scope.selectBlock=function(block){if($scope.selects.toggle(block),block.select=!block.select,$scope.already=!1,!($scope.selects.length<3)){$scope.selects.length>3&&($scope.selects.splice(0,1)[0].select=!1);var se=$scope.format.selects($scope.selects);$scope.discovered.forEach(function(each){$scope.format.discovered(each)==se&&($scope.already=$scope.discovered.indexOf(each))})}},$scope.style=function(block){var style={};return style.color=$scope.colors[block.color],style["background-color"]=$scope.backs[block.back],style},$scope.selects=[],$scope.check=function(){if(3==$scope.selects.length&&$scope.already===!1){var selects=[];$scope.selects.forEach(function(block){selects.push($scope.blocks.indexOf(block))}),socket.emit("checkgame.check",selects)}},$scope.done=function(){socket.emit("checkgame.done")},$scope.send=function(message){void 0!=message&&""!=message&&socket.emit("checkgame.chat",message)},$scope.alerts=alert.getAlerts(),$scope.prompt=function(val){window.prompt("URL","http://picks.be/check/"+val)},socket.on("checkgame.steamstart",function(i){var val=3e4;2==i&&(val=6e4),$scope.steamstart(val)}),socket.on("checkgame.move",function(id){$state.go("check",{id:id})}),socket.on("checkgame.steamend",function(){$scope.steamend()}),socket.on("checkgame.game",function(send){function blockSelect(i){$scope.selectBlock($scope.blocks[i])}var selects;send.reset?$scope.resetShapes():(selects=[],$scope.selects.forEach(function(block){selects.push($scope.blocks.indexOf(block))})),$scope.name=send.name,$scope.blocks=send.blocks,$scope.discovered=send.discovered,$scope.players=send.players,send.reset||selects.forEach(function(i){blockSelect(i)}),sortPlayers(),$scope.$apply()}),socket.on("checkgame.players",function(players){$scope.players=players,players.forEach(function(p){p.sid==user.sid&&($scope.player=p)}),$scope.$apply()});var chat=document.querySelector(".chat-window");socket.on("checkgame.chat",function(message){message.date=new Date,$scope.messages.push(message),$scope.$apply(),$timeout(function(){chat.scrollTop=chat.scrollHeight})})}),app.controller("main",function($scope,socket){$scope.skills=["JAVA","Javascript","AngularJS","NodeJS","Spring MVC","Java WebServlet","MongoDB","Mysql","Redis","Less","Css3","Html5","SocketIO","NginX"]}),app.controller("numberchess",function($scope){function Unit(val){this.value=val}$scope.board=[];for(var i=0;9>i;i++)$scope.board.push([{},{},{},{},{},{}]);$scope.units=[];for(var i=1;10>i;i++)$scope.units.push(new Unit(i));$scope.units.push(new Unit("bomb")),$scope.units.push(new Unit("bomb")),$scope.units.push(new Unit("bomb")),$scope.units.push(new Unit("king")),$scope.here=function(position){if(void 0!=$scope.selected){var tmp=position.unit;$scope.units.remove($scope.selected),position.unit=$scope.selected,void 0!=tmp&&$scope.units.push(tmp),$scope.selected=void 0}},$scope.select=function(unit){$scope.selected=unit}}),app.controller("profile",function(user,$scope,req,alert){$scope.user=user,$scope.updateUser=function(){req.put("/api/user",user).success(function(res){alert(res)})}}),app.controller("sabotage",function($scope){function allPath(){var card=new PathCard;return card.left=!0,card.right=!0,card.down=!0,card.up=!0,card.center=!0,card}function leftDown(){var card=new PathCard;return card.left=!0,card.down=!0,card.center=!0,card}function rightDown(){var card=new PathCard;return card.right=!0,card.down=!0,card.center=!0,card}function upRightDown(){var card=new PathCard;return card.right=!0,card.down=!0,card.up=!0,card.center=!0,card}function leftRightDown(){var card=new PathCard;return card.left=!0,card.right=!0,card.down=!0,card.center=!0,card}function upDown(){var card=new PathCard;return card.down=!0,card.up=!0,card.center=!0,card}function leftRight(){var card=new PathCard;return card.left=!0,card.right=!0,card.center=!0,card}function PathCard(){}for(var cards=$scope.cards=[],i=0;6>i;i++)cards.push(allPath());for(i=0;5>i;i++)cards.push(leftDown());for(i=0;4>i;i++)cards.push(rightDown());for(i=0;5>i;i++)cards.push(upRightDown());for(i=0;5>i;i++)cards.push(leftRightDown());for(i=0;4>i;i++)cards.push(upDown());for(i=0;3>i;i++)cards.push(leftRight());var card=allPath();card.center=!1,cards.push(card),card=leftDown(),card.center=!1,cards.push(card),card=leftRightDown(),card.center=!1,cards.push(card),card=upRightDown(),card.center=!1,cards.push(card),card=rightDown(),card.center=!1,cards.push(card),card=upDown(),card.center=!1,cards.push(card),card=leftRight(),card.center=!1,cards.push(card),card=new PathCard,card.down=!0,cards.push(card),card=new PathCard,card.left=!0,cards.push(card),card=allPath(),card.dest=!0,card.gold=!0,card=leftDown(),card.dest=!0,card=rightDown,card.dest=!0}),app.controller("seven",function($scope,socket,user,alert,$window,$timeout,$stateParams){function sortPlayers(){$scope.inPlayers=[],$scope.players.forEach(function(p){return p.sid==user.sid?void($scope.player=p):void(p.playing&&$scope.inPlayers.push(p))}),$scope.inPlayers.forEach(function(p){$scope.players.remove(p)}),$scope.player.playing&&$scope.players.remove($scope.player)}function timerStart(val){function startTimer(tick){start||(start=val+tick),$scope.time=parseInt((start-tick)/1e3),$scope.$apply(),$scope.time>0&&window.requestAnimationFrame(startTimer)}window.requestAnimationFrame(startTimer);var start}function zeroWin(winners){var name="";winners.forEach(function(winner){name+=winner.name+" "});var message=name+"님이 0으로 승리하셨습니다.";message+="칩을 나눠 가져갑니다.",alert(message)}function singleWin(winner){function getWinner(sid){for(var i=0;i<$scope.inPlayers.length;i++)if($scope.inPlayers[i].sid==sid)return $scope.inPlayers[i]}if(winner==$scope.player.sid)return $scope.win=!0,void alert("이겼습니다! 칩을 가져옵니다.");$scope.win=!1,winner=getWinner(winner);var message=winner.name+"님이 "+winner.submitted+"(으)로 승리하셨습니다.";message+=winner.submitted<4&&0!=winner.submitted?"칩과 추가 칩을 가져갑니다.":"칩을 가져갑니다.",alert(message)}function open(){function open(I,delay){i!=$scope.inPlayers.length&&$timeout(function(){$scope.inPlayers[i].open=!0,i++,open(i,delay),$scope.$apply()},delay)}alert("준비됐어? 까보까? <br> 자 지금부터 확인들어 가것습니다이");var i=0;open(i,800)}$scope.logs=[];var bluechips=$scope.bluechips=[],blackchips=$scope.blackchips=[];$scope.$watch("game.point",function(point){$scope.compute(point)}),$scope.roomId=$stateParams.id,$scope.prompt=function(val){window.prompt("URL","http://picks.be/check/"+val)};var bp=5;$scope.compute=function(point){function getPoint(){return bluechips.length+blackchips.length*bp}var chips=getPoint();chips>point&&($scope.win=!1,bluechips=$scope.bluechips=[],blackchips=$scope.blackchips=[],chips=0);for(var i=chips;point>i;i++)bluechips.push(i)},$scope.$watch("player.in",function(val){void 0!=val&&socket.emit("sevengame.in",val)},!0),$scope.submit=function(i){socket.emit("sevengame.submit",i)};var dek=document.querySelector(".card-dek"),width=dek.offsetWidth;angular.element($window).bind("resize",function(){null!=dek&&(width=dek.offsetWidth,$scope.$apply())}),$scope.cardStyle=function(index){function getTanDeg(deg){var rad=deg*Math.PI/180;return Math.tan(rad)}var result={};if($scope.player){var def=index/$scope.player.cards.length;result.left=width*def-11,result.left+="px";var degree=30*def-13.5;result.transform="rotate("+degree+"deg)";var x=width/2-(width*def-11)-58;return result.top=getTanDeg(degree)*x*-1,result.top+="px",result}},$scope.open=function(p){return p.submitted===!0?void alert("패건들지 말어 손모가지 날아가붕게"):void(p.open=!p.open)},$scope.time=0,socket.on("sevengame.time",function(time){timerStart(time)}),socket.on("sevengame.players",function(players){$scope.players=players,sortPlayers(),$scope.$apply()}),socket.on("sevengame.alert",function(message){$scope.logs.unshift(message),alert(message.message),$scope.$apply()}),socket.on("sevengame.sync",function(state){if($scope.players=state.players,sortPlayers(),$scope.game=state.game,$scope.$apply(),state.type){if("open"==state.type)return void open();state.type.winner&&singleWin(state.type.winner),state.type.winners&&zeroWin(state.type.winner)}})}),app.controller("login",function($scope,req,alert,popup,user){$scope.user=user,$scope.mailRegex=/^([\w-]+(?:\.[\w-]+)*)@((?:[\w-]+\.)*\w[\w-]{0,66})\.([a-z]{2,6}(?:\.[a-z]{2})?)$/i,$scope.register=function(){req.post("/api/user",user).success(function(res){return res.error?void alert("이메일 형식이 맞지 않거나 이미 가입한 이메일입니다."):(alert("가입되었습니다."),void popup("login",!0))})},$scope.login=function(){req.post("/api/user/login",{email:user.email,password:user.password}).success(function(res){return res.error?void alert(res.error):(alert("로그인 되었습니다."),void location.reload())})}}),function(){var scope,pop;app.factory("popup",function(){var popup={};return pop=function(val,param){popup.show=!0,popup.state=val,scope.param=param,scope.$$phase||scope.$apply()},pop.isShow=function(){return popup.show},pop.getState=function(){return popup.state},pop.hide=function(){popup.show=!1},pop}),app.directive("popup",function(){return{restrict:"A",link:function(s,e,a){e.bind("click",function(){var params=a.popup.split(",");pop(params[0],params[1])})}}}),app.controller("popup",function($scope,popup,socket){scope=$scope,$scope.url={},$scope.url.login="/dist/popup/login/login.html",$scope.url.register="/dist/popup/login/register.html",$scope.url.rooms="/dist/popup/rooms/rooms.html",$scope.classes={},$scope.classes.login=$scope.classes.register=$scope.classes.license="window-s",$scope.classes.rooms="window-s",$scope.popup=popup})}(),app.controller("rooms",function(socket,$scope,$state,popup){$scope.move=function(room){$state.go($scope.param,{id:room}),popup.hide()}}),function(){var scope;app.controller("alert",function($scope,socket,alert){scope=$scope,$scope.alerts=[]}),app.factory("alert",function($timeout,socket){var alert=function(message,success,duration){duration||(duration=3e3,$timeout.cancel(this.hide)),this.hide=$timeout(function(){scope.showing=!1},duration);var al={alert:message,date:new Date,success:success};scope.alerts.push(al),$timeout(function(){scope.alerts.remove(al)},duration),scope.alert=al,scope.showing=!0,scope.$$phase||scope.$apply()};return socket.on("alert",function(message){alert(message.message,!message.fail,message.duration)}),alert.getAlerts=function(){return scope.alerts},alert})}(),app.factory("req",function($http){var req=$http;return req.get=function(url,data){function parse(obj){var str=[];for(var p in obj)str.push(encodeURIComponent(p)+"="+encodeURIComponent(obj[p]));return str.join("&")}return void 0!=data&&(url+="?",url+=parse(data)),$http({method:"GET",url:url})},req}),app.factory("socket",function(user,$state,$timeout){function yelling(){console.log("yo"),yo||(socket.disconnect(),socket.connect("/",{path:"/socket.io",multiplex:!1}),$timeout(yelling,1e3))}var socket=io("/",{path:"/socket.io",multiplex:!1}),yo=!1;console.log("yo start"),socket.on("connect",function(){console.log("yo received"),yo=!0}),yelling(),socket.on("redirect",function(send){send.message&&alert(send.message),$state.go(send.state,send.params)});var on=socket.on.bind(socket),events={};return socket.on=function(name,fn){events[name]&&socket.removeListener(name,events[name]),on(name,fn),events[name]=fn},socket}),app.factory("user",function(req){var user={};return req.get("/api/user/session").success(function(res){res.user&&(angular.copy(res.user,user),res.user.email&&(user.logged=!0))}),user}),app.controller("wrap",function($scope,socket){socket.on("highest",function(highest){$scope.highest=highest,$scope.$apply()}),socket.on("gameList",function(list){$scope.list=list,$scope.$apply()})});